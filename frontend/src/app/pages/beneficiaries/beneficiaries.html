<main>

<div class="beneficiarios-container"> 
    <div class="header-container">
        <h2>Registrar Beneficiarios</h2>
    <button class="btn-open-modal" (click)="abrirModal()">Registrar Entrega</button>
    </div> 
    <div class="table-responsive">
      <table class="beneficiarios-table">
        <thead>
          <tr>
            <th>N°</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Cédula</th>
            <th>Teléfono</th>
            <th>Opciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let beneficiario of beneficiarios; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ beneficiario.nombre }}</td>
            <td>{{ beneficiario.apellido }}</td>
            <td>{{ beneficiario.cedula }}</td>
            <td>{{ beneficiario.telefono }}</td>
            <td>
              <div class="action-buttons">
                <button class="btn-editar">Editar</button>
                <button class="btn-eliminar">Eliminar</button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
<!-- Modal con nuevo control flow @if -->
@if (mostrarModal) {
  <div class="overlay">
    <div class="modal-container">
      <h2>Registrar Entrega</h2>
      <p class="required-text">Todos los campos con <span>*</span> son obligatorios</p>

      <form (ngSubmit)="registrarEntrega()" #form="ngForm">
        <div class="form-group">
          <label>Nombre*</label>
          <input type="text" name="nombre" [(ngModel)]="entrega.nombre" required>
        </div>

        <div class="form-group">
          <label>Apellido*</label>
          <input type="text" name="apellido" [(ngModel)]="entrega.apellido" required>
        </div>

        <div class="form-group">
          <label>Cédula*</label>
          <input type="text" name="cedula" [(ngModel)]="entrega.cedula" required>
        </div>

        <div class="form-group">
          <label>Teléfono*</label>
          <input type="text" name="telefono" [(ngModel)]="entrega.telefono" required>
        </div>

        <div class="form-group">
          <label>Dirección*</label>
          <input type="text" name="direccion" [(ngModel)]="entrega.direccion" required>
        </div>

        <div class="form-group">
          <label>Tipo de donación*</label>
          <select name="tipoDonacion" [(ngModel)]="entrega.tipoDonacion" required>
            <option value="" disabled selected>Seleccione un tipo</option>
            <option value="Alimentos">Alimentos</option>
            <option value="Ropa">Ropa</option>
            <option value="Medicinas">Medicinas</option>
          </select>
        </div>

        <div class="form-group">
          <label>Cantidad a donar*</label>
          <input type="number" name="cantidad" [(ngModel)]="entrega.cantidad" required>
        </div>

        <div class="form-group">
          <label>Fecha de entrega*</label>
          <input type="date" name="fechaEntrega" [(ngModel)]="entrega.fechaEntrega" required>
        </div>

        <div class="button-container">
          <button type="submit" [disabled]="!form.valid">Registrar entrega</button>
          <button type="button" class="cancel-btn" (click)="cerrarModal()">Cancelar</button>
        </div>
      </form>
    </div>
  </div>
}
</main>